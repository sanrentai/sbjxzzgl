<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <p:outputPanel styleClass="Container100 NoIndent">
        <p:outputPanel styleClass="Container100 Responsive100">
            <div class="Card">
                <h1 class="CardBigTopic Purple">
                    <h:outputText value="#{ctrlMaster.createPageTitle('CAR', 'CAR0007')}"/>
                </h1>
                <div class="SeparatorFull"></div>
                <p:tabView styleClass="Container100 Responsive100">
                    <p:tab title="事故记录">
                        <p:outputPanel id="toolbar" styleClass="Container100 Responsive100 NoIndent toolbar">
                            <p:toolbar>
                                <f:facet name="left">
                                    <!--新建按钮-->
                                    <p:commandButton value="新建" process="@this" actionListener="#{ctrlCAR0007.onStartEditing}"
                                                     resetValues="true"
                                                     update="pnlInputArea,toolbar" disabled="#{not empty ctrlCAR0007.vm.editingShiGu}"/>
                                    <!--刷新按钮-->
                                    <p:commandButton value="刷新" process="@this" actionListener="#{ctrlCAR0007.onRefreshData}" 
                                                     resetValues="true" oncomplete="PF('wvShiGuList').clearFilters();"
                                                     update="pngDetails"/>
                                </f:facet>
                            </p:toolbar>
                        </p:outputPanel>
                        <p:outputPanel id="pnlInputArea" styleClass="Container100 Responsive100 NoIndent pnlInputArea">
                            <p:outputPanel styleClass="Container100 Responsive100 ui-fluid" rendered="#{not empty ctrlCAR0007.vm.editingShiGu}">
                                <!--车辆-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50 ui-g-12 ui-md-6 ui-lg-4" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="ceLiang" value="车辆"/>
                                    <p:selectOneMenu id="ceLiang" value="#{ctrlCAR0007.vm.editingShiGu.cheLiangId}" 
                                                     required="true" requiredMessage="#{ctrlCAR0007.isRequiredMessage('车辆')}"
                                                     disabled="#{not empty ctrlCAR0007.vm.editingShiGu.shiGuId}">
                                        <f:selectItem itemLabel="请选择车辆" itemValue=""/>
                                        <f:selectItems value="#{ctrlCAR0007.vm.cheLiangList}" var="cheLiang" itemLabel="#{cheLiang.chePaiZhaoHaoMa}" itemValue="#{cheLiang.cheLiangId}" />
                                    </p:selectOneMenu>
                                </p:panelGrid>
                                <!--经办人-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="yuanGongId" value="经办人"/>
                                    <p:selectOneMenu id="yuanGongId" value="#{ctrlCAR0007.vm.editingShiGu.yuanGongId}" 
                                                     required="true" requiredMessage="#{ctrlCAR0007.isRequiredMessage('经办人')}">
                                        <f:selectItem itemLabel="请选择经办人" itemValue=""/>
                                        <f:selectItems value="#{ctrlCAR0007.vm.yuanGongList}" var="yuanGong" itemLabel="#{yuanGong.nameZ}" itemValue="#{yuanGong.yuanGongId}" />
                                    </p:selectOneMenu>
                                </p:panelGrid>
                                <!--司机-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="txtSiJi" value="司机"/>
                                    <p:selectOneMenu id="txtSiJi" value="#{ctrlCAR0007.vm.editingShiGu.siJiId}" 
                                                     required="true" requiredMessage="#{ctrlCAR0007.isRequiredMessage('司机')}">
                                        <f:selectItem itemLabel="请选择司机" itemValue=""/>
                                        <f:selectItems value="#{ctrlCAR0007.vm.siJiList}" var="siJi" itemLabel="#{siJi.xingMing}" itemValue="#{siJi.siJiId}" />
                                    </p:selectOneMenu>
                                </p:panelGrid>
                                <!--时间-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="shiJian" value="时间"/>
                                    <p:calendar id="shiJian" value="#{ctrlCAR0007.vm.editingShiGu.shiJian}"
                                                readonlyInput="true"
                                                mask="true" styleClass="tct"
                                                pattern="#{bizConfig.dateTimeFormat}"
                                                required="true" size="12"
                                                requiredMessage="#{ctrlCAR0007.isRequiredMessage('时间')}"
                                                converterMessage="#{ctrlCAR0007.dateUnvalidMessage('时间')}"
                                                locale="#{bizConfig.locale}">
                                    </p:calendar>
                                </p:panelGrid>
                                <!--地点-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="txtDiDian" value="地点"/>
                                    <p:inputText id="txtDiDian" value="#{ctrlCAR0007.vm.editingShiGu.diDian}" maxlength="400"/>
                                </p:panelGrid>
                                <!--事故描述-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="miaoShu" value="事故描述"/>
                                    <p:inputText id="miaoShu" value="#{ctrlCAR0007.vm.editingShiGu.miaoShu}" maxlength="400"/>
                                </p:panelGrid>
                                <!--责任-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="chengDanZeRen" value="事故责任"/>
                                    <p:inputText id="chengDanZeRen" value="#{ctrlCAR0007.vm.editingShiGu.chengDanZeRen}" maxlength="400"/>
                                </p:panelGrid>
                                <!--责任比例-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="chengDanBiLi" value="责任比例"/>
                                    <p:inputNumber id="chengDanBiLi" value="#{ctrlCAR0007.vm.editingShiGu.chengDanBiLi}"
                                                   symbol="%" 
                                                 symbolPosition="s" emptyValue="zero"
                                                   maxlength="400"/>
                                </p:panelGrid>
                                <!--损失金额-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="sunShiJinE" value="损失金额"/>
                                    <p:inputNumber id="sunShiJinE" value="#{ctrlCAR0007.vm.editingShiGu.sunShiJinE}" 
                                                   symbol="元" symbolPosition="s" 
                                                   decimalSeparator="." thousandSeparator=","
                                                   maxlength="400"/>
                                </p:panelGrid>
                                <!--公司承担金额-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="gongSiChengDanJinE" value="公司承担金额"/>
                                    <p:inputNumber id="gongSiChengDanJinE" value="#{ctrlCAR0007.vm.editingShiGu.gongSiChengDanJinE}"
                                                 symbol="元" symbolPosition="s" 
                                                   decimalSeparator="." thousandSeparator=","
                                                   maxlength="400"/>
                                </p:panelGrid>
                                <!--司机承担金额-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="geRenChengDanJinE" value="司机承担"/>
                                    <p:inputNumber id="geRenChengDanJinE" value="#{ctrlCAR0007.vm.editingShiGu.geRenChengDanJinE}" 
                                                   symbol="元" symbolPosition="s" 
                                                   decimalSeparator="." thousandSeparator=","
                                                   maxlength="400"/>
                                </p:panelGrid>
                                <!--处理状态-->
                                <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-60 NoPadding,wd-p-10">
                                    <p:outputLabel for="chuLiZhuangtTai" value="处理状态"/>
                                    <p:selectOneMenu id="chuLiZhuangtTai" value="#{ctrlCAR0007.vm.editingShiGu.chuLiZhuangtTai}"
                                                     styleClass="leiBieGuanLi"
                                                     required="true" requiredMessage="#{ctrlCAR0006.isRequiredMessage('处理状态')}">
                                        <f:selectItems value="#{ctrlSystemConfig.vm.getLeiBieByFenLeiMing('ShiGuChulZT')}"
                                                       var="xiangMu" itemLabel="#{xiangMu.xiangMuMing}" itemValue="#{xiangMu.serialId}"/>
                                    </p:selectOneMenu>
                                    <p:commandLink 
                                        style="margin-right: 0px;"
                                        actionListener="#{ctrlSystemConfig.newLeiBieGuanLi('ShiGuChulZT')}"
                                        process="@this"
                                        update="@(.add_fen_lei_xiang_mu)"
                                        oncomplete="PF('add_fen_lei_xiang_mu').show();">
                                        <i class="fa fa-plus Fs18 Green"></i>
                                    </p:commandLink>
                                </p:panelGrid>
                                <!--处理结果-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="chuLiJieGuo" value="处理结果"/>
                                    <p:inputText id="chuLiJieGuo" value="#{ctrlCAR0007.vm.editingShiGu.chuLiJieGuo}" maxlength="400"/>
                                </p:panelGrid>
                                <!--备注-->
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank ui-g-12 ui-md-6 ui-lg-4 ht-f-50" columnClasses="wd-p-30 NoPadding,wd-p-70 NoPadding">
                                    <p:outputLabel for="beiZhu" value="备注"/>
                                    <p:inputText id="beiZhu" value="#{ctrlCAR0007.vm.editingShiGu.beiZhu}" maxlength="400"/>
                                </p:panelGrid>

                                <p:panelGrid columns="5" layout="grid" styleClass="ui-panelgrid-blank">
                                    <p:commandButton value="保存" process="pnlInputArea"
                                                     oncomplete="showErrorMsg();"
                                                     update="pnlInputArea, pngDetails, toolbar, frmMain:ovPnlValidation, frmMain:msgValidation, frmMain:growlMessage, frmMain:btnValidationPanel"
                                                     actionListener="#{ctrlCAR0007.onSaveShiGu}"/>
                                    <p:commandButton value="取消" process="@this" 
                                                     update="pnlInputArea, toolbar" actionListener="#{ctrlCAR0007.onCancelEditing}"
                                                     styleClass="RedButton"/>
                                </p:panelGrid>

                            </p:outputPanel>

                            <p:outputPanel id="pngDetails" styleClass="Container100 Responsive100 pngDetails">
                                <p:dataTable value="#{ctrlCAR0007.vm.shiGuList}" var="shiGu" cellSeparator="5"
                                             widgetVar="wvShiGuList"
                                             rows="10"
                                             filterDelay="500"
                                             style="word-break: keep-all!important"
                                             paginator="true"
                                             paginatorAlwaysVisible="false"
                                             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                             emptyMessage="没有数据">
                                    <f:facet name="header">
                                        <h:outputText value="事故信息一览"/>
                                    </f:facet>
                                    <p:columnGroup type="header">
                                        <p:row>
                                            <p:column headerText="编辑" styleClass="wd-p-5"/>
                                            <p:column headerText="删除" styleClass="wd-p-5"/>
                                            <p:column headerText="车辆" filterBy="#{shiGu.cheLiangId}" filterMatchMode="exact" sortBy="#{shiGu.cheLiangId}" styleClass="wd-p-10">
                                                <f:facet name="filter">
                                                    <p:selectOneMenu onchange="PF('wvShiGuList').filter()" filter="true" filterMatchMode="contains">
                                                        <f:selectItem itemLabel="选择车辆" itemValue="#{null}" noSelectionOption="true" />
                                                        <f:selectItems value="#{ctrlCAR0007.vm.cheLiangList}" var="cheliang"
                                                                       itemLabel="#{cheliang.cheLiangMingCheng}" itemValue="#{cheliang.cheLiangId}"/>
                                                    </p:selectOneMenu>
                                                </f:facet>
                                            </p:column>
                                            <p:column headerText="时间" styleClass="tct wd-p-10" sortBy="#{shiGu.shiJian}"/>
                                            <p:column headerText="地点" styleClass="tct wd-p-10"/>
                                            <p:column headerText="司机" styleClass="tct wd-p-6" sortBy="#{shiGu.siJiId}"/>  
                                            <p:column headerText="事故描述" styleClass="tct wd-p-10"/>
                                            <p:column headerText="损失金额" styleClass="tct wd-p-5"/>
                                            <p:column headerText="事故责任" styleClass="tct wd-p-5"/>
                                            <p:column headerText="责任比例" styleClass="tct wd-p-5"/>
                                            <p:column headerText="公司承担金额" styleClass="tct wd-p-5"/>
                                            <p:column headerText="司机承担金额" styleClass="tct wd-p-5"/>
                                            <p:column headerText="经办人" styleClass="tct wd-p-6" sortBy="#{shiGu.yuanGongId}"/>                                   
                                            <p:column headerText="事故状态" styleClass="tct wd-p-20"/>
                                            <p:column headerText="处理结果" styleClass="tct wd-p-20"/>
                                            <p:column headerText="备注" styleClass="tct wd-p-20"/>
                                        </p:row>
                                    </p:columnGroup>
                                    <p:column styleClass="tct">
                                        <p:commandLink actionListener="#{ctrlCAR0007.onEditShiGu(shiGu)}"
                                                       process="@this" update="@(.pnlInputArea), @(.toolbar)">
                                            <i class="fa fa-pencil Fs18 Blue"></i>
                                        </p:commandLink>
                                    </p:column>
                                    <p:column styleClass="tct">
                                        <p:commandLink actionListener="#{ctrlCAR0007.onDeleteShiGu(shiGu)}"
                                                       process="@this" 
                                                       update="@(.pnlInputArea), @(.toolbar), @(.pngDetails), frmMain:ovPnlValidation, frmMain:msgValidation, frmMain:growlMessage, frmMain:btnValidationPanel"
                                                       oncomplete="showErrorMsg();">
                                            <i class="fa fa-trash Fs18 Red"></i>
                                            <p:confirm header="确认" message="确定要删除吗?" icon="ui-icon-alert" />
                                        </p:commandLink>
                                    </p:column>
                                    <!--车辆-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.cheLiang.chePaiZhaoHaoMa}"/>
                                    </p:column>
                                    <!--时间-->
                                    <p:column styleClass="tct">
                                        <h:outputText value="#{shiGu.shiJian}">
                                            <f:convertDateTime pattern="#{bizConfig.dateTimeFormat}"/>
                                        </h:outputText>
                                    </p:column>
                                    <!--地点-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.diDian}"/>
                                    </p:column>
                                    <!--司机-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.siJi.xingMing}"/>
                                    </p:column>  
                                    <!--事故描述-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.miaoShu}"/>
                                    </p:column>
                                    <!--损失金额-->
                                    <p:column styleClass="trt">
                                        <h:outputText value="#{shiGu.sunShiJinE}">
                                            <f:convertNumber currencySymbol="" type="currency" maxFractionDigits="2"/>
                                        </h:outputText>
                                    </p:column>
                                    <!--事故责任-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.chengDanZeRen}"/>
                                    </p:column>
                                    <!--责任比例-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.chengDanBiLi}%"/>
                                    </p:column>
                                    <!--公司承担金额-->
                                    <p:column styleClass="trt">
                                        <h:outputText value="#{shiGu.gongSiChengDanJinE}">
                                            <f:convertNumber currencySymbol="" type="currency" maxFractionDigits="2"/>
                                        </h:outputText>
                                    </p:column>
                                    <!--个人承担金额-->
                                    <p:column styleClass="trt">
                                        <h:outputText value="#{shiGu.geRenChengDanJinE}">
                                            <f:convertNumber currencySymbol="" type="currency" maxFractionDigits="2"/>
                                        </h:outputText>
                                    </p:column>
                                    <!--经办人-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.yuanGong.nameZ}"/>
                                    </p:column>                              
                                    <!--处理状态-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.leiChuLiZhuangTai.xiangMuMing}"/>
                                    </p:column>
                                    <!--处理结果-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.chuLiJieGuo}"/>
                                    </p:column>
                                    <!--备注-->
                                    <p:column styleClass="tlt">
                                        <h:outputText value="#{shiGu.beiZhu}"/>
                                    </p:column>
                                </p:dataTable>
                            </p:outputPanel>
                        </p:outputPanel>
                    </p:tab>
                    <!--                    <p:tab title="库存状况">
                                            <p:outputPanel id="ku_cun_xiang_xi" styleClass="Container100 Responsive100">
                                                <p:dataTable id="you_ku_cun_xiang_xi"
                                                             value="#{ctrlCAR0007.vm.meiKuCunList}"
                                                             emptyMessage="#{msg.mei_you_zhao_dao_ren_he_ji_lu}"
                                                             var="item"
                                                             rows="15"
                                                             filterDelay="500"
                                                             paginatorAlwaysVisible="false"
                                                             paginator="true"
                                                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                             styleClass="tct ku_cun_xiang_xi">
                                                    <f:facet name="header">
                                                        煤库库存信息
                                                    </f:facet>
                                                    <p:columnGroup type="header">
                                                        <p:row>
                                                            <p:column headerText="仓库" styleClass="wd-p-8"/>
                                                            <p:column headerText="库房" styleClass="wd-p-8"/>
                                                            <p:column headerText="货位" styleClass="wd-p-15"/>
                                                            <p:column headerText="#{msg.wu_zi_id}" styleClass="wd-p-10"
                                                                      filterBy="#{item.pk.wuZiId}" filterMaxLength="12"/>
                                                            <p:column headerText="#{msg.wu_zhi_miao_shu}" filterBy="#{item.shiTi.wuZiMiaoShu}" filterMaxLength="50"/>
                                                            <p:column headerText="#{msg.shu_liang}" styleClass="wd-p-10"/>
                                                            <p:column headerText="#{msg.bei_zhu}" styleClass="wd-p-15"/>
                                                            <p:column headerText="购买入库" styleClass="wd-p-10"/>
                                                            <p:column headerText="调整货位" styleClass="wd-p-10"/>
                                                        </p:row>
                                                    </p:columnGroup>
                                                    <p:column styleClass="tlt">
                                                        <h:outputText value="#{item.huoWei.suoShuCangKu.cangKuMing}"/>
                                                    </p:column>
                                                    <p:column styleClass="tlt">
                                                        <h:outputText value="#{item.huoWei.kuFang.kuFangMing}"/>
                                                    </p:column>
                                                                <p:column styleClass="tlt">
                                                                    <h:outputText value="#{item.huoWei.huoWeiMiaoShu}"/>
                                                                </p:column>
                                                    <p:column  sortBy="#{item.pk.wuZiId}">
                                                        <h:outputText value="#{item.pk.wuZiId}"/>
                                                    </p:column>
                                                    <p:column styleClass="tlt">
                                                        <h:outputText id="guigegaiyao" value="#{item.shiTi.wuZiMiaoShu}"/>
                                                        <p:tooltip for="guigegaiyao" value="#{item.shiTi.nameWithShuXingSummary}"/>
                                                    </p:column>
                                                    <p:column styleClass="trt">
                                                        <h:outputText value="#{item.kuCunShu}">
                                                            <f:convertNumber pattern="#{bizConfig.numberFormatPattern}"/>
                                                        </h:outputText>
                                                        <h:outputText value="#{item.shiTi.wuZiDanWei.danWeiMing}"/>
                                                    </p:column>
                                                    <p:column styleClass="tlt">
                                                        <h:outputText value="#{item.beiZhu}"/>
                                                    </p:column>
                                                    <p:column styleClass="tct">
                                                        <p:commandLink value="购买" actionListener="#{ctrlCAR0007.showZhiJieRuKuDialog(item)}"
                                                                       process="@this"
                                                                       update="@(.zhijierukuPanel)"
                                                                       oncomplete="PF('zhijierukuDialog').show()"/>
                                                    </p:column>
                                                    <p:column styleClass="tct">
                                                        <p:commandLink value="调整货位" actionListener="#{ctrlCAR0007.showTiaoZhenHuoWeiDialog(item)}"
                                                                       process="@this"
                                                                       update="@(.tiaozhenghuoweiPanel)"
                                                                       oncomplete="PF('tiaozhenghuoweiDialog').show()"/>
                                                    </p:column>
                                                </p:dataTable>
                                            </p:outputPanel>
                    
                                            <p:dialog header="调整货位"
                                                      styleClass=""
                                                      widgetVar="tiaozhenghuoweiDialog"
                                                      closeOnEscape="true"
                                                      modal="true"
                                                      resizable="false">
                                                <h:panelGrid id="tiaozhenghuoweiPanel" columns="2" styleClass="tiaozhenghuoweiPanel">
                                                    <p:outputLabel value="物资"/>
                                                    <h:outputText value="#{ctrlCAR0007.vm.selectedKuCun.shiTi.wuZiMiaoShu}"/>
                    
                                                    <p:outputLabel value="数量"/>
                                                    <h:outputText value="#{ctrlCAR0007.vm.selectedKuCun.kuCunShu}">
                                                        <f:convertNumber pattern="#{bizConfig.numberFormatPattern}"/>
                                                    </h:outputText>
                    
                                                    <p:outputLabel for="yidongzhihuowei" value="移动至"/>
                                                    <p:selectOneMenu id="yidongzhihuowei" value="#{ctrlCAR0007.vm.tiaoZheng.yiRuHuoWeiId}" required="true">
                                                        <f:selectItems value="#{ctrlCAR0007.vm.selectedKuCun.huoWei.suoShuCangKu.huoWeiList}"
                                                                       var="huowei"
                                                                       itemLabel="#{huowei.kuFang.kuFangMing}"
                                                                       itemValue="#{huowei.huoWeiId}"/>
                                                    </p:selectOneMenu>
                    
                                                    <p:outputLabel for="yidongshuliang" value="移动数量"/>
                                                    <p:inputText id="yidongshuliang" value="#{ctrlCAR0007.vm.tiaoZheng.yiDongShu}" styleClass="trt"
                                                                 required="true" requiredMessage="#{ctrlMST0012.isRequiredMessage('移动数量')}" maxlength="13">
                                                        <p:keyFilter regEx="/[\d\.]/"/>
                                                        <f:convertNumber pattern="#{bizConfig.numberFormatPattern}"/>
                                                    </p:inputText>
                                                </h:panelGrid>
                    
                                                <p:commandButton value="移动"
                                                                 actionListener="#{ctrlCAR0007.tiaoZhengHuoWei}"
                                                                 process="@this, tiaozhenghuoweiPanel"
                                                                 update="ku_cun_xiang_xi, @(.ku_cun_xiang_xi), frmMain:ovPnlValidation, frmMain:msgValidation, frmMain:growlMessage, frmMain:btnValidationPanel"
                                                                 oncomplete="showErrorMsg();PF('tiaozhenghuoweiDialog').hide();"/>
                                            </p:dialog>
                    
                                            <p:dialog header="购买"
                                                      styleClass=""
                                                      widgetVar="zhijierukuDialog"
                                                      closeOnEscape="true"
                                                      modal="true"
                                                      resizable="false">
                                                <h:panelGrid id="zhijierukuPanel" columns="2" styleClass="zhijierukuPanel">
                                                    <p:outputLabel for="huowei" value="库房"/>
                                                    <p:selectOneMenu id="huowei"
                                                                     required="true" requiredMessage="#{ctrlCAR0007.isRequiredMessage('库房')}" 
                                                                     value="#{ctrlCAR0007.vm.zhiJieRuKuMingXi.pk.huoWeiId}">
                                                        <f:selectItems value="#{ctrlCAR0007.vm.zhiJieRuKuMingXi.shenqing.cangKu.huoWeiList}"
                                                                       var="huowei"
                                                                       itemLabel="#{huowei.kuFang.kuFangMing}"
                                                                       itemValue="#{huowei.huoWeiId}"/>
                                                    </p:selectOneMenu>
                    
                                                    <p:outputLabel value="物资"/>
                                                    <h:outputText value="#{ctrlCAR0007.vm.zhiJieRuKuMingXi.shenqing.shiti.wuZiMiaoShu}"/>
                    
                                                    <p:outputLabel for="shuliang" value="数量"/>
                                                    <p:inputText id="shuliang" value="#{ctrlCAR0007.vm.zhiJieRuKuMingXi.shenqing.shuLiang}" styleClass="trt"
                                                                 required="true" requiredMessage="#{ctrlMST0012.isRequiredMessage('数量')}" maxlength="13">
                                                        <p:keyFilter regEx="/[\d\.]/"/>
                                                    </p:inputText>
                    
                                                    <p:outputLabel for="danjia" value="单价"/>
                                                    <p:inputNumber id="danjia"
                                                                   value="#{ctrlCAR0007.vm.zhiJieRuKuMingXi.shenqing.danJia}" styleClass="trt-inputNumber" 
                                                                   maxValue="99999999999.99" minValue="0.00" emptyValue="0" thousandSeparator=","
                                                                   required="true" requiredMessage="#{ctrlCAR0007.isRequiredMessage('单价')}" 
                                                                   decimalPlaces="6">
                                                    </p:inputNumber>
                    
                                                    <p:outputLabel value="备注"/>
                                                    <p:inputText value="#{ctrlCAR0007.vm.zhiJieRuKuMingXi.shenqing.beiZhu}"/>
                                                </h:panelGrid>
                    
                                                <p:commandButton value="直接入库"
                                                                 actionListener="#{ctrlCAR0007.zhiJieRuKu}"
                                                                 process="@this, zhijierukuPanel"
                                                                 update="ku_cun_xiang_xi, frmMain:ovPnlValidation, frmMain:msgValidation, frmMain:growlMessage, frmMain:btnValidationPanel"
                                                                 oncomplete="showErrorMsg();PF('zhijierukuDialog').hide();"/>
                                            </p:dialog>
                                        </p:tab>-->
                    <!--                    <p:tab title="事故统计">
                                            <h:panelGrid columns="9" cellpadding="5" id="canShu">
                                                <p:outputLabel value="时间范围 从"/>
                                                <p:calendar id="txtStartDate" 
                                                            value="#{ctrlCAR0007.vm.startDate}"
                                                            placeholder="开始日期"
                                                            disabled="#{ctrlCAR0007.vm.shiJianFanWei!='custom'}"
                                                            mask="true" styleClass="tct"
                                                            pattern="#{bizConfig.dateFormat}"
                                                            required="true"
                                                            requiredMessage="#{ctrlCAR0007.isRequiredMessage('开始日期')}"
                                                            size="12"
                                                            converterMessage="#{ctrlCAR0007.dateUnvalidMessage('开始日期')}"
                                                            locale="#{bizConfig.locale}">
                                                </p:calendar>
                                                <p:outputLabel value="到"/>
                                                <p:calendar id="txtEndDate" value="#{ctrlCAR0007.vm.endDate}"
                                                            placeholder="结束日期"
                                                            disabled="#{ctrlCAR0007.vm.shiJianFanWei!='custom'}"
                                                            mask="true" styleClass="tct"
                                                            pattern="#{bizConfig.dateFormat}"
                                                            required="true"
                                                            requiredMessage="#{ctrlCAR0007.isRequiredMessage('结束日期')}"
                                                            size="12"
                                                            converterMessage="#{ctrlCAR0007.dateUnvalidMessage('结束日期')}"
                                                            locale="#{bizConfig.locale}">
                                                </p:calendar>
                                                <p:selectOneMenu id="shiJianFanWei" 
                                                                 value="#{ctrlCAR0007.vm.shiJianFanWei}" 
                                                                 style="width:125px">
                                                    <p:ajax listener="#{ctrlCAR0007.changeRiQi}" process="@this" update="@this txtStartDate txtEndDate"/>
                                                    <f:selectItem itemLabel="今天" itemValue="today" />
                                                    <f:selectItem itemLabel="本周" itemValue="thisWeek" />
                                                    <f:selectItem itemLabel="本月" itemValue="thisMonth" />
                                                    <f:selectItem itemLabel="本季度" itemValue="thisSeason" />
                                                    <f:selectItem itemLabel="自定义" itemValue="custom" />
                                                </p:selectOneMenu>
                                                刷新按钮
                                                <p:commandButton value="刷新" process="@this canShu" actionListener="#{ctrlCAR0007.shuaXinShiGuTongJi}" 
                                                                 resetValues="true" oncomplete="PF('wvShiGuTongJiList').clearFilters(); PAGE_COM.buttonShortCutKeyInvoke('frmMain:btnValidationPanel');"
                                                                 update="shiGuTongJi,   frmMain:ovPnlValidation, frmMain:msgValidation, frmMain:growlMessage, frmMain:btnValidationPanel"/>
                                            </h:panelGrid>
                                            <p:outputPanel id="pnlInputArea1" styleClass="Container100 Responsive100 NoIndent pnlInputArea">
                                                <p:outputPanel id="shiGuTongJi" styleClass="Container100 Responsive100 pngDetails">
                                                    <p:dataTable value="#{ctrlCAR0007.vm.shiGuTongJiList}" var="shiGu" cellSeparator="5"
                                                                 widgetVar="wvShiGuTongJiList"
                                                                 rows="10"
                                                                 paginator="true"
                                                                 paginatorAlwaysVisible="false"
                                                                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                                                 emptyMessage="没有数据">
                                                        <f:facet name="header">
                                                            <h:outputText value="事故统计"/>
                                                        </f:facet>
                                                        <p:columnGroup type="header">
                                                            <p:row>
                                                                <p:column headerText="车辆" sortBy="#{shiGu.xiangMuId}" styleClass="wd-p-10"/>
                                                                <p:column headerText="煤库" sortBy="#{shiGu.cangKuMing}" styleClass="wd-p-10"/>
                                                                <p:column headerText="数量" styleClass="tct wd-p-10"/>
                                                                <p:column headerText="总金额" styleClass="tct wd-p-10"/>
                                                            </p:row>
                                                        </p:columnGroup>
                                                        车辆
                                                        <p:column styleClass="tlt">
                                                            <h:outputText value="#{shiGu.xiangMuMing}"/>
                                                        </p:column>
                                                        仓库名
                                                        <p:column styleClass="tlt">
                                                            <h:outputText value="#{shiGu.cangKuMing}"/>
                                                        </p:column>
                                                        数量
                                                        <p:column styleClass="trt">
                                                            <h:outputText value="#{shiGu.shiGuShu}">
                                                                <f:convertNumber pattern="#{bizConfig.numberFormatPattern}"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        总价
                                                        <p:column styleClass="trt">
                                                            <h:outputText value="#{shiGu.zongJiE}">
                                                                <f:convertNumber currencySymbol="" type="currency" maxFractionDigits="2"/>
                                                            </h:outputText>
                                                        </p:column>
                    
                                                    </p:dataTable>
                                                </p:outputPanel>
                                            </p:outputPanel>
                                        </p:tab>-->
                </p:tabView>
            </div>
        </p:outputPanel>
    </p:outputPanel>

    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
        <p:commandButton value="确定" type="button" styleClass="ui-confirmdialog-yes"/>
        <p:commandButton value="取消" type="button" styleClass="ui-confirmdialog-no"/>
    </p:confirmDialog>
</ui:composition>
