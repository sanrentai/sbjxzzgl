<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <script src="/sbjx/resources/js/BaiDuMap.js" />
    <script>
        $(document).ready(function () {

        });
        function showMap() {
            var map = new BMap.Map("Map");
            map.centerAndZoom(new BMap.Point(116.404, 39.915), 15);
            map.addControl(new BMap.MapTypeControl());
            map.setCurrentCity("北京");
            map.enableScrollWheelZoom(true);

            var marker = new BMap.Marker(map.getBounds().getCenter());
            map.addOverlay(marker);

            map.addEventListener("moving", function () {
                marker.setPosition(map.getCenter());
                $('.XCoord').val(map.getCenter().lng);
                $('.YCoord').val(map.getCenter().lat);
                $('.Zoom').val(map.getZoom());
            });
            map.addEventListener("zoomend", function () {
                marker.setPosition(map.getCenter());
                $('.XCoord').val(map.getCenter().lng);
                $('.YCoord').val(map.getCenter().lat);
                $('.Zoom').val(map.getZoom());
            });
        }
    </script>
    <p:megaMenu orientation="vertical">
        <p:menuitem value="设置地图中心位置" onclick="PF('MapCenterSetting').show();"></p:menuitem>
    </p:megaMenu>
    <p:dialog widgetVar="MapCenterSetting" modal="true" width="512px" height="512px" header="设置地图中心位置" onShow="showMap();">
        <div id="Map" style="width:100%;height:70%;margin:0;"></div>
        <p:panelGrid columns="2" layout="grid">
            <p:outputLabel value="经度："></p:outputLabel>
            <p:inputText class="XCoord" readonly="true"></p:inputText>
            
            <p:outputLabel value="纬度："></p:outputLabel>
            <p:inputText class="YCoord" readonly="true"></p:inputText>
            
            <p:outputLabel value="缩放："></p:outputLabel>
            <p:inputText class="Zoom" readonly="true"></p:inputText>
            
            <p:commandButton value="确定"></p:commandButton>
        </p:panelGrid>
    </p:dialog>
</ui:composition>
