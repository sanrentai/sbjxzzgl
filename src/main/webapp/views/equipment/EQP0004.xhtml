<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:pe="http://primefaces.org/ui/extensions"
                xmlns:h="http://xmlns.jcp.org/jsf/html">
    <p:outputPanel styleClass="Card" id="rootContainer">
        <h1 class="CardBigTopic Purple">
            <h:outputText value="#{ctrlMaster.createPageTitle('EQP', 'EQP0004')}"/>
        </h1>
        <!--无敌分割线-->
  
    <p:outputPanel id="pngDetails" styleClass="Container100 Responsive100 pngDetails">
        <div class="Card">
        <p:outputPanel id="toolbar" styleClass="Container100 Responsive100 NoIndent">
            <h:panelGrid columns="6" cellpadding="5">
                        <p:commandButton id="Equipment" 
                                     value="选择设备" 
                                     type="button" 
                                     onclick="PF('deviceSelectDialog').show();"
                                     update="rootContainer">
                    </p:commandButton>    
                   
                    <!--记录类型-->
                    
                        <p:selectOneMenu id="addJiLuLeiXing" value="#{ctrlEQP0004.vm.equipNotesInEditing.TType}">
                            <f:selectItem itemLabel="记录类型" itemValue=""/>
                            <f:selectItem itemLabel="维修" itemValue="0"/>
                            <f:selectItem itemLabel="保养" itemValue="1"/>
                        </p:selectOneMenu>   
                  
                    <!--负责人-->
                    
                        <p:selectOneMenu id="addFuZeRen" value="#{ctrlEQP0004.vm.equipNotesInEditing.fuZeRen}" >
                            <f:selectItem itemLabel="负责人" itemValue=""/>
                            <!--<f:selectItems value="#{ctrlEQP0004.vm.equipNoteList}" var="type" itemLabel="#{type.fuZeRen}" itemValue="#{type.fuZeRen}" />-->
                        </p:selectOneMenu>        
                    
                    <!--记录时段-->
                    <p:outputLabel for="addDateTime" value="查询时间:"/>
                    <p:calendar id="addDateTime" value="#{ctrlEQP0004.vm.equipNotesInEditing.chaXunShiJian}" pattern="yyyy-MM-dd" mask="true" />
                  
                    <!--查询-->
                    <p:commandButton value="查询" process="@this" actionListener="#{ctrlCAR0001.onRefreshData}" 
                                     resetValues="true" oncomplete="PF('wvCheLiangList').clearFilters();"
                                     update="pngDetails"/>
                    </h:panelGrid>

        </p:outputPanel>
            <div class="EmptyBox10"></div>
            <p:dataTable value="#{ctrlCAR0001.vm.cheLiangList}" var="cheLiang" cellSeparator="5"
                         widgetVar="wvCheLiangList"
                         rows="10"
                         filterDelay="500"
                         style="word-break: keep-all!important"
                         paginator="true"
                         paginatorAlwaysVisible="false"
                         paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                         emptyMessage="没有数据">
                <f:facet name="header">
                    <h:outputText value="维修及保养记录"/>
                </f:facet>
                <p:columnGroup type="header">
                    <p:row>
                        <p:column headerText="设备" styleClass="wd-p-5"/>
                        <p:column headerText="类型" styleClass="wd-p-5"/>
                        <p:column headerText="工作内容" filterBy="#{cheLiang.cheLiangMingCheng}" filterMaxLength="20" filterMatchMode="contains" styleClass="wd-p-10"/>
                        <p:column headerText="遗留" styleClass="tct wd-p-5"/>
                        <p:column headerText="工作时间" styleClass="tct wd-p-5"/>
                        <p:column headerText="负责人" styleClass="tct wd-p-5"/>
                        <p:column headerText="下次时间" styleClass="tct wd-p-10"/>
                    </p:row>
                </p:columnGroup>
               
              
                <!--设备-->
                <p:column>
                    <h:outputText value="#{cheLiang.beiZhu}"/>
                </p:column>
                <!--类型-->
                <p:column>
                    <h:outputText value="#{cheLiang.pinPai}"/>
                </p:column>
                <!--工作内容-->
                <p:column>
                    <h:outputText value="#{cheLiang.xingHao}"/>
                </p:column>
                <!--遗留-->
                <p:column>
                    <h:outputText value="#{cheLiang.price}"/>
                </p:column>
                <!--工作时间-->
                <p:column>
                    <h:outputText value="#{cheLiang.purchaseDate}">
                        <f:convertDateTime pattern="#{bizConfig.dateFormat}"/>
                    </h:outputText>
                </p:column>
                <!--负责人-->
                <p:column>
                    <h:outputText value="#{cheLiang.engineNumber}"/>
                </p:column>
                <!--下次时间-->
                <p:column>
                    <h:outputText value="#{cheLiang.color}"/>
                </p:column>
            </p:dataTable>
        </div>
    </p:outputPanel>
</p:outputPanel>

<p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
    <p:commandButton value="确定" type="button" styleClass="ui-confirmdialog-yes"/>
    <p:commandButton value="取消" type="button" styleClass="ui-confirmdialog-no"/>
</p:confirmDialog>
    
      <!-- 对话框 -->
        <p:dialog widgetVar="deviceSelectDialog" modal="true">
            <p:dataTable value="#{XunJianDianSheZhiController.vm.equipmentList}" style="width:512px;"
                         var="equipment" 
                         paginatorAlwaysVisible="false"
                         paginator="true" rows="10"
                         paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                         id="equipmentSelectList" widgetVar="equipmentSelectList"
                         styleClass="bg-c-row-odd wd-f-700"
                         scrollable="true"
                         emptyMessage="无数据">
                <f:facet name="header">
                    <h:outputText value="选择设备"/>
                </f:facet>
                <p:columnGroup type="header">
                    <p:row>
                        <p:column styleClass="tct wd-p-30" 
                                  headerText="设备名"
                                  filterBy="#{equipment.ENmae}" 
                                  filterMaxLength="10" 
                                  filterMatchMode="contains"/>
                        <p:column styleClass="tct wd-p-10" headerText="选择"></p:column>
                        <p:column styleClass="tct wd-p-30" headerText="上级设备"></p:column>
                        <p:column styleClass="tct wd-p-30" headerText="规格/型号"></p:column>
                    </p:row>
                </p:columnGroup>
                <p:column styleClass="tct wd-p-30">
                    <h:outputText value="#{equipment.ENmae}">

                    </h:outputText>
                </p:column>
                <p:column styleClass="tct wd-p-10">
                    <p:commandLink value="选择" 
                                   actionListener="#{XunJianDianSheZhiController.setCurrentEquipmentId(equipment.id)}" 
                                   process="@this" 
                                   update="frmMain:rootContainer"
                                   oncomplete="PF('deviceSelectDialog').hide()"></p:commandLink>
                </p:column>
                <p:column styleClass="tct wd-p-30">
                    <h:outputText value="#{equipment.parentStringChain}">

                    </h:outputText>
                </p:column>
                <p:column styleClass="tct wd-p-30">
                    <h:outputText value="#{equipment.guiGeHeXingHao}">

                    </h:outputText>
                </p:column>
            </p:dataTable>
        </p:dialog>
</ui:composition>